\hypertarget{_w_a_v_file_reader_8cpp_source}{}\doxysection{WAVFile\+Reader.\+cpp}
\label{_w_a_v_file_reader_8cpp_source}\index{Week13/WAVFileReader.cpp@{Week13/WAVFileReader.cpp}}
\mbox{\hyperlink{_w_a_v_file_reader_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00001}00001 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00002}00002 \textcolor{comment}{// File: WAVFileReader.cpp}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00003}00003 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00004}00004 \textcolor{comment}{// Functions for loading WAV audio files}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00005}00005 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00006}00006 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00007}00007 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00008}\mbox{\hyperlink{_w_a_v_file_reader_8cpp_ac7bef5d85e3dcd73eef56ad39ffc84a9}{00008}} \textcolor{preprocessor}{\#define WIN32\_LEAN\_AND\_MEAN}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00009}00009 \textcolor{preprocessor}{\#include <Windows.h>}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00010}00010 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00011}00011 \textcolor{preprocessor}{\#include <assert.h>}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00012}00012 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00013}00013 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_x_w_b_tool_2_w_a_v_file_reader_8h}{WAVFileReader.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00014}00014 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00015}00015 \textcolor{keyword}{using namespace }\mbox{\hyperlink{namespace_direct_x}{DirectX}};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00016}00016 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00017}00017 \textcolor{preprocessor}{\#ifndef MAKEFOURCC}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00018}\mbox{\hyperlink{_w_a_v_file_reader_8cpp_a706a9d1784b228428ecc412848c32d83}{00018}} \textcolor{preprocessor}{\#define MAKEFOURCC(ch0, ch1, ch2, ch3) \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00019}00019 \textcolor{preprocessor}{                (static\_cast<uint32\_t>(static\_cast<uint8\_t>(ch0)) \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00020}00020 \textcolor{preprocessor}{                | (static\_cast<uint32\_t>(static\_cast<uint8\_t>(ch1)) << 8) \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00021}00021 \textcolor{preprocessor}{                | (static\_cast<uint32\_t>(static\_cast<uint8\_t>(ch2)) << 16) \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00022}00022 \textcolor{preprocessor}{                | (static\_cast<uint32\_t>(static\_cast<uint8\_t>(ch3)) << 24))}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00023}00023 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* defined(MAKEFOURCC) */}\textcolor{preprocessor}{}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00024}00024 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00025}00025 \textcolor{keyword}{namespace}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00026}00026 \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00027}00027     \textcolor{keyword}{struct }handle\_closer \{ \textcolor{keywordtype}{void} operator()(HANDLE h) \textcolor{keyword}{noexcept} \{ \textcolor{keywordflow}{if} (h) CloseHandle(h); \} \};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00028}00028 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00029}00029     \textcolor{keyword}{using} ScopedHandle = std::unique\_ptr<void, handle\_closer>;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00030}00030 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00031}00031     \textcolor{keyword}{inline} HANDLE safe\_handle(HANDLE h) \textcolor{keyword}{noexcept} \{ \textcolor{keywordflow}{return} (h == INVALID\_HANDLE\_VALUE) ? nullptr : h; \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00032}00032 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00033}00033     \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00034}00034     \textcolor{comment}{// .WAV files}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00035}00035     \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00036}00036     \textcolor{keyword}{constexpr} uint32\_t FOURCC\_RIFF\_TAG = \mbox{\hyperlink{_w_a_v_file_reader_8cpp_a706a9d1784b228428ecc412848c32d83}{MAKEFOURCC}}(\textcolor{charliteral}{'R'}, \textcolor{charliteral}{'I'}, \textcolor{charliteral}{'F'}, \textcolor{charliteral}{'F'});}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00037}00037     \textcolor{keyword}{constexpr} uint32\_t FOURCC\_FORMAT\_TAG = \mbox{\hyperlink{_w_a_v_file_reader_8cpp_a706a9d1784b228428ecc412848c32d83}{MAKEFOURCC}}(\textcolor{charliteral}{'f'}, \textcolor{charliteral}{'m'}, \textcolor{charliteral}{'t'}, \textcolor{charliteral}{' '});}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00038}00038     \textcolor{keyword}{constexpr} uint32\_t FOURCC\_DATA\_TAG = \mbox{\hyperlink{_w_a_v_file_reader_8cpp_a706a9d1784b228428ecc412848c32d83}{MAKEFOURCC}}(\textcolor{charliteral}{'d'}, \textcolor{charliteral}{'a'}, \textcolor{charliteral}{'t'}, \textcolor{charliteral}{'a'});}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00039}00039     \textcolor{keyword}{constexpr} uint32\_t FOURCC\_WAVE\_FILE\_TAG = \mbox{\hyperlink{_w_a_v_file_reader_8cpp_a706a9d1784b228428ecc412848c32d83}{MAKEFOURCC}}(\textcolor{charliteral}{'W'}, \textcolor{charliteral}{'A'}, \textcolor{charliteral}{'V'}, \textcolor{charliteral}{'E'});}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00040}00040     \textcolor{keyword}{constexpr} uint32\_t FOURCC\_XWMA\_FILE\_TAG = \mbox{\hyperlink{_w_a_v_file_reader_8cpp_a706a9d1784b228428ecc412848c32d83}{MAKEFOURCC}}(\textcolor{charliteral}{'X'}, \textcolor{charliteral}{'W'}, \textcolor{charliteral}{'M'}, \textcolor{charliteral}{'A'});}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00041}00041     \textcolor{keyword}{constexpr} uint32\_t FOURCC\_DLS\_SAMPLE = \mbox{\hyperlink{_w_a_v_file_reader_8cpp_a706a9d1784b228428ecc412848c32d83}{MAKEFOURCC}}(\textcolor{charliteral}{'w'}, \textcolor{charliteral}{'s'}, \textcolor{charliteral}{'m'}, \textcolor{charliteral}{'p'});}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00042}00042     \textcolor{keyword}{constexpr} uint32\_t FOURCC\_MIDI\_SAMPLE = \mbox{\hyperlink{_w_a_v_file_reader_8cpp_a706a9d1784b228428ecc412848c32d83}{MAKEFOURCC}}(\textcolor{charliteral}{'s'}, \textcolor{charliteral}{'m'}, \textcolor{charliteral}{'p'}, \textcolor{charliteral}{'l'});}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00043}00043     \textcolor{keyword}{constexpr} uint32\_t FOURCC\_XWMA\_DPDS = \mbox{\hyperlink{_w_a_v_file_reader_8cpp_a706a9d1784b228428ecc412848c32d83}{MAKEFOURCC}}(\textcolor{charliteral}{'d'}, \textcolor{charliteral}{'p'}, \textcolor{charliteral}{'d'}, \textcolor{charliteral}{'s'});}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00044}00044     \textcolor{keyword}{constexpr} uint32\_t FOURCC\_XMA\_SEEK = \mbox{\hyperlink{_w_a_v_file_reader_8cpp_a706a9d1784b228428ecc412848c32d83}{MAKEFOURCC}}(\textcolor{charliteral}{'s'}, \textcolor{charliteral}{'e'}, \textcolor{charliteral}{'e'}, \textcolor{charliteral}{'k'});}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00045}00045 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00046}00046 \textcolor{preprocessor}{\#pragma pack(push,1)}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00047}00047     \textcolor{keyword}{struct }RIFFChunk}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00048}00048     \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00049}00049         uint32\_t tag;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00050}00050         uint32\_t size;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00051}00051     \};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00052}00052 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00053}00053     \textcolor{keyword}{struct }RIFFChunkHeader}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00054}00054     \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00055}00055         uint32\_t tag;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00056}00056         uint32\_t size;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00057}00057         uint32\_t riff;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00058}00058     \};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00059}00059 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00060}00060     \textcolor{keyword}{struct }DLSLoop}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00061}00061     \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00062}00062         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t LOOP\_TYPE\_FORWARD = 0x00000000;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00063}00063         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t LOOP\_TYPE\_RELEASE = 0x00000001;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00064}00064 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00065}00065         uint32\_t size;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00066}00066         uint32\_t loopType;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00067}00067         uint32\_t loopStart;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00068}00068         uint32\_t loopLength;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00069}00069     \};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00070}00070 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00071}00071     \textcolor{keyword}{struct }RIFFDLSSample}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00072}00072     \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00073}00073         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t OPTIONS\_NOTRUNCATION = 0x00000001;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00074}00074         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t OPTIONS\_NOCOMPRESSION = 0x00000002;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00075}00075 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00076}00076         uint32\_t    size;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00077}00077         uint16\_t    unityNote;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00078}00078         int16\_t     fineTune;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00079}00079         int32\_t     gain;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00080}00080         uint32\_t    options;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00081}00081         uint32\_t    loopCount;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00082}00082     \};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00083}00083 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00084}00084     \textcolor{keyword}{struct }MIDILoop}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00085}00085     \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00086}00086         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t LOOP\_TYPE\_FORWARD = 0x00000000;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00087}00087         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t LOOP\_TYPE\_ALTERNATING = 0x00000001;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00088}00088         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t LOOP\_TYPE\_BACKWARD = 0x00000002;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00089}00089 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00090}00090         uint32\_t cuePointId;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00091}00091         uint32\_t type;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00092}00092         uint32\_t start;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00093}00093         uint32\_t end;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00094}00094         uint32\_t fraction;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00095}00095         uint32\_t playCount;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00096}00096     \};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00097}00097 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00098}00098     \textcolor{keyword}{struct }RIFFMIDISample}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00099}00099     \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00100}00100         uint32\_t        manufacturerId;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00101}00101         uint32\_t        productId;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00102}00102         uint32\_t        samplePeriod;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00103}00103         uint32\_t        unityNode;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00104}00104         uint32\_t        pitchFraction;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00105}00105         uint32\_t        SMPTEFormat;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00106}00106         uint32\_t        SMPTEOffset;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00107}00107         uint32\_t        loopCount;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00108}00108         uint32\_t        samplerData;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00109}00109     \};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00110}00110 \textcolor{preprocessor}{\#pragma pack(pop)}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00111}00111 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00112}00112     \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(RIFFChunk) == 8, \textcolor{stringliteral}{"{}structure size mismatch"{}});}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00113}00113     \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(RIFFChunkHeader) == 12, \textcolor{stringliteral}{"{}structure size mismatch"{}});}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00114}00114     \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(DLSLoop) == 16, \textcolor{stringliteral}{"{}structure size mismatch"{}});}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00115}00115     \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(RIFFDLSSample) == 20, \textcolor{stringliteral}{"{}structure size mismatch"{}});}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00116}00116     \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(MIDILoop) == 24, \textcolor{stringliteral}{"{}structure size mismatch"{}});}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00117}00117     \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(RIFFMIDISample) == 36, \textcolor{stringliteral}{"{}structure size mismatch"{}});}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00118}00118 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00119}00119     \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00120}00120     \textcolor{keyword}{const} RIFFChunk* FindChunk(}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00121}00121         \_In\_reads\_bytes\_(sizeBytes) \textcolor{keyword}{const} uint8\_t* data,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00122}00122         \_In\_ \textcolor{keywordtype}{size\_t} sizeBytes,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00123}00123         \_In\_ uint32\_t tag) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00124}00124     \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00125}00125         \textcolor{keywordflow}{if} (!data)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00126}00126             \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00127}00127 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00128}00128         \textcolor{keyword}{const} uint8\_t* ptr = data;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00129}00129         \textcolor{keyword}{const} uint8\_t* end = data + sizeBytes;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00130}00130 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00131}00131         \textcolor{keywordflow}{while} (end > (ptr + \textcolor{keyword}{sizeof}(RIFFChunk)))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00132}00132         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00133}00133             \textcolor{keyword}{auto} header = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }RIFFChunk*\textcolor{keyword}{>}(ptr);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00134}00134             \textcolor{keywordflow}{if} (header-\/>tag == tag)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00135}00135                 \textcolor{keywordflow}{return} header;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00136}00136 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00137}00137             \textcolor{keyword}{auto} offset = header-\/>size + \textcolor{keyword}{sizeof}(RIFFChunk);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00138}00138             ptr += offset;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00139}00139         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00140}00140 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00141}00141         \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00142}00142     \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00143}00143 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00144}00144 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00145}00145     \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00146}00146     HRESULT WaveFindFormatAndData(}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00147}00147         \_In\_reads\_bytes\_(wavDataSize) \textcolor{keyword}{const} uint8\_t* wavData,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00148}00148         \_In\_ \textcolor{keywordtype}{size\_t} wavDataSize,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00149}00149         \_Outptr\_ \textcolor{keyword}{const} WAVEFORMATEX** pwfx,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00150}00150         \_Outptr\_ \textcolor{keyword}{const} uint8\_t** pdata,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00151}00151         \_Out\_ uint32\_t* dataSize,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00152}00152         \_Out\_ \textcolor{keywordtype}{bool}\& dpds,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00153}00153         \_Out\_ \textcolor{keywordtype}{bool}\& seek) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00154}00154     \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00155}00155         \textcolor{keywordflow}{if} (!wavData || !pwfx)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00156}00156             \textcolor{keywordflow}{return} E\_POINTER;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00157}00157 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00158}00158         dpds = seek = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00159}00159 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00160}00160         \textcolor{keywordflow}{if} (wavDataSize < (\textcolor{keyword}{sizeof}(RIFFChunk) * 2 + \textcolor{keyword}{sizeof}(uint32\_t) + \textcolor{keyword}{sizeof}(WAVEFORMAT)))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00161}00161         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00162}00162             \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00163}00163         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00164}00164 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00165}00165         \textcolor{keyword}{const} uint8\_t* wavEnd = wavData + wavDataSize;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00166}00166 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00167}00167         \textcolor{comment}{// Locate RIFF 'WAVE'}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00168}00168         \textcolor{keyword}{auto} riffChunk = FindChunk(wavData, wavDataSize, FOURCC\_RIFF\_TAG);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00169}00169         \textcolor{keywordflow}{if} (!riffChunk || riffChunk-\/>size < 4)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00170}00170         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00171}00171             \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00172}00172         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00173}00173 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00174}00174         \textcolor{keyword}{auto} riffHeader = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }RIFFChunkHeader*\textcolor{keyword}{>}(riffChunk);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00175}00175         \textcolor{keywordflow}{if} (riffHeader-\/>riff != FOURCC\_WAVE\_FILE\_TAG \&\& riffHeader-\/>riff != FOURCC\_XWMA\_FILE\_TAG)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00176}00176         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00177}00177             \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00178}00178         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00179}00179 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00180}00180         \textcolor{comment}{// Locate 'fmt '}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00181}00181         \textcolor{keyword}{auto} ptr = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }uint8\_t*\textcolor{keyword}{>}(riffHeader) + \textcolor{keyword}{sizeof}(RIFFChunkHeader);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00182}00182         \textcolor{keywordflow}{if} ((ptr + \textcolor{keyword}{sizeof}(RIFFChunk)) > wavEnd)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00183}00183         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00184}00184             \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(ERROR\_HANDLE\_EOF);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00185}00185         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00186}00186 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00187}00187         \textcolor{keyword}{auto} fmtChunk = FindChunk(ptr, riffHeader-\/>size, FOURCC\_FORMAT\_TAG);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00188}00188         \textcolor{keywordflow}{if} (!fmtChunk || fmtChunk-\/>size < \textcolor{keyword}{sizeof}(PCMWAVEFORMAT))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00189}00189         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00190}00190             \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00191}00191         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00192}00192 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00193}00193         ptr = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }uint8\_t*\textcolor{keyword}{>}(fmtChunk) + \textcolor{keyword}{sizeof}(RIFFChunk);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00194}00194         \textcolor{keywordflow}{if} (ptr + fmtChunk-\/>size > wavEnd)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00195}00195         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00196}00196             \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(ERROR\_HANDLE\_EOF);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00197}00197         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00198}00198 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00199}00199         \textcolor{keyword}{auto} wf = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }WAVEFORMAT*\textcolor{keyword}{>}(ptr);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00200}00200 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00201}00201         \textcolor{comment}{// Validate WAVEFORMAT (focused on chunk size and format tag, not other data that XAUDIO2 will validate)}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00202}00202         \textcolor{keywordflow}{switch} (wf-\/>wFormatTag)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00203}00203         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00204}00204             \textcolor{keywordflow}{case} WAVE\_FORMAT\_PCM:}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00205}00205             \textcolor{keywordflow}{case} WAVE\_FORMAT\_IEEE\_FLOAT:}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00206}00206                 \textcolor{comment}{// Can be a PCMWAVEFORMAT (16 bytes) or WAVEFORMATEX (18 bytes)}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00207}00207                 \textcolor{comment}{// We validiated chunk as at least sizeof(PCMWAVEFORMAT) above}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00208}00208                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00209}00209 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00210}00210             \textcolor{keywordflow}{default}:}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00211}00211             \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00212}00212                 \textcolor{keywordflow}{if} (fmtChunk-\/>size < \textcolor{keyword}{sizeof}(WAVEFORMATEX))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00213}00213                 \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00214}00214                     \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00215}00215                 \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00216}00216 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00217}00217                 \textcolor{keyword}{auto} wfx = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }WAVEFORMATEX*\textcolor{keyword}{>}(ptr);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00218}00218 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00219}00219                 \textcolor{keywordflow}{if} (fmtChunk-\/>size < (\textcolor{keyword}{sizeof}(WAVEFORMATEX) + wfx-\/>cbSize))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00220}00220                 \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00221}00221                     \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00222}00222                 \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00223}00223 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00224}00224                 \textcolor{keywordflow}{switch} (wfx-\/>wFormatTag)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00225}00225                 \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00226}00226                     \textcolor{keywordflow}{case} WAVE\_FORMAT\_WMAUDIO2:}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00227}00227                     \textcolor{keywordflow}{case} WAVE\_FORMAT\_WMAUDIO3:}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00228}00228                         dpds = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00229}00229                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00230}00230 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00231}00231                     \textcolor{keywordflow}{case}  0x166 \textcolor{comment}{/*WAVE\_FORMAT\_XMA2*/}: \textcolor{comment}{// XMA2 is supported by Xbox One}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00232}00232                         \textcolor{keywordflow}{if} ((fmtChunk-\/>size < 52 \textcolor{comment}{/*sizeof(XMA2WAVEFORMATEX)*/}) || (wfx-\/>cbSize < 34 \textcolor{comment}{/*( sizeof(XMA2WAVEFORMATEX) -\/ sizeof(WAVEFORMATEX) )*/}))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00233}00233                         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00234}00234                             \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00235}00235                         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00236}00236                         seek = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00237}00237                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00238}00238 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00239}00239                     \textcolor{keywordflow}{case} WAVE\_FORMAT\_ADPCM:}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00240}00240                         \textcolor{keywordflow}{if} ((fmtChunk-\/>size < (\textcolor{keyword}{sizeof}(WAVEFORMATEX) + 32)) || (wfx-\/>cbSize < 32 \textcolor{comment}{/*MSADPCM\_FORMAT\_EXTRA\_BYTES*/}))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00241}00241                         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00242}00242                             \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00243}00243                         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00244}00244                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00245}00245 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00246}00246                     \textcolor{keywordflow}{case} WAVE\_FORMAT\_EXTENSIBLE:}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00247}00247                         \textcolor{keywordflow}{if} ((fmtChunk-\/>size < \textcolor{keyword}{sizeof}(WAVEFORMATEXTENSIBLE)) || (wfx-\/>cbSize < (\textcolor{keyword}{sizeof}(WAVEFORMATEXTENSIBLE) -\/ \textcolor{keyword}{sizeof}(WAVEFORMATEX))))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00248}00248                         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00249}00249                             \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00250}00250                         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00251}00251                         \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00252}00252                         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00253}00253                             \textcolor{keyword}{static} \textcolor{keyword}{const} GUID s\_wfexBase = \{ 0x00000000, 0x0000, 0x0010, \{ 0x80, 0x00, 0x00, 0xAA, 0x00, 0x38, 0x9B, 0x71 \} \};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00254}00254 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00255}00255                             \textcolor{keyword}{auto} wfex = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }WAVEFORMATEXTENSIBLE*\textcolor{keyword}{>}(ptr);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00256}00256 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00257}00257                             \textcolor{keywordflow}{if} (memcmp(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }BYTE*\textcolor{keyword}{>}(\&wfex-\/>SubFormat) + \textcolor{keyword}{sizeof}(DWORD),}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00258}00258                                 \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }BYTE*\textcolor{keyword}{>}(\&s\_wfexBase) + \textcolor{keyword}{sizeof}(DWORD), \textcolor{keyword}{sizeof}(GUID) -\/ \textcolor{keyword}{sizeof}(DWORD)) != 0)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00259}00259                             \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00260}00260                                 \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(ERROR\_NOT\_SUPPORTED);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00261}00261                             \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00262}00262 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00263}00263                             \textcolor{keywordflow}{switch} (wfex-\/>SubFormat.Data1)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00264}00264                             \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00265}00265                                 \textcolor{keywordflow}{case} WAVE\_FORMAT\_PCM:}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00266}00266                                 \textcolor{keywordflow}{case} WAVE\_FORMAT\_IEEE\_FLOAT:}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00267}00267                                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00268}00268 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00269}00269                                 \textcolor{comment}{// MS-\/ADPCM and XMA2 are not supported as WAVEFORMATEXTENSIBLE}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00270}00270 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00271}00271                                 \textcolor{keywordflow}{case} WAVE\_FORMAT\_WMAUDIO2:}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00272}00272                                 \textcolor{keywordflow}{case} WAVE\_FORMAT\_WMAUDIO3:}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00273}00273                                     dpds = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00274}00274                                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00275}00275 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00276}00276                                 \textcolor{keywordflow}{default}:}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00277}00277                                     \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(ERROR\_NOT\_SUPPORTED);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00278}00278                             \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00279}00279 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00280}00280                         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00281}00281                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00282}00282 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00283}00283                     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00284}00284                         \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(ERROR\_NOT\_SUPPORTED);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00285}00285                 \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00286}00286             \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00287}00287         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00288}00288 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00289}00289         \textcolor{comment}{// Locate 'data'}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00290}00290         ptr = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }uint8\_t*\textcolor{keyword}{>}(riffHeader) + \textcolor{keyword}{sizeof}(RIFFChunkHeader);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00291}00291         \textcolor{keywordflow}{if} ((ptr + \textcolor{keyword}{sizeof}(RIFFChunk)) > wavEnd)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00292}00292         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00293}00293             \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(ERROR\_HANDLE\_EOF);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00294}00294         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00295}00295 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00296}00296         \textcolor{keyword}{auto} dataChunk = FindChunk(ptr, riffChunk-\/>size, FOURCC\_DATA\_TAG);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00297}00297         \textcolor{keywordflow}{if} (!dataChunk || !dataChunk-\/>size)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00298}00298         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00299}00299             \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(ERROR\_INVALID\_DATA);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00300}00300         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00301}00301 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00302}00302         ptr = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }uint8\_t*\textcolor{keyword}{>}(dataChunk) + \textcolor{keyword}{sizeof}(RIFFChunk);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00303}00303         \textcolor{keywordflow}{if} (ptr + dataChunk-\/>size > wavEnd)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00304}00304         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00305}00305             \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(ERROR\_HANDLE\_EOF);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00306}00306         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00307}00307 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00308}00308         *pwfx = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }WAVEFORMATEX*\textcolor{keyword}{>}(wf);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00309}00309         *pdata = ptr;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00310}00310         *dataSize = dataChunk-\/>size;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00311}00311         \textcolor{keywordflow}{return} S\_OK;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00312}00312     \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00313}00313 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00314}00314 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00315}00315     \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00316}00316     HRESULT WaveFindLoopInfo(}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00317}00317         \_In\_reads\_bytes\_(wavDataSize) \textcolor{keyword}{const} uint8\_t* wavData,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00318}00318         \_In\_ \textcolor{keywordtype}{size\_t} wavDataSize,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00319}00319         \_Out\_ uint32\_t* pLoopStart,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00320}00320         \_Out\_ uint32\_t* pLoopLength) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00321}00321     \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00322}00322         \textcolor{keywordflow}{if} (!wavData || !pLoopStart || !pLoopLength)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00323}00323             \textcolor{keywordflow}{return} E\_POINTER;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00324}00324 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00325}00325         \textcolor{keywordflow}{if} (wavDataSize < (\textcolor{keyword}{sizeof}(RIFFChunk) + \textcolor{keyword}{sizeof}(uint32\_t)))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00326}00326         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00327}00327             \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00328}00328         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00329}00329 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00330}00330         *pLoopStart = 0;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00331}00331         *pLoopLength = 0;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00332}00332 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00333}00333         \textcolor{keyword}{const} uint8\_t* wavEnd = wavData + wavDataSize;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00334}00334 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00335}00335         \textcolor{comment}{// Locate RIFF 'WAVE'}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00336}00336         \textcolor{keyword}{auto} riffChunk = FindChunk(wavData, wavDataSize, FOURCC\_RIFF\_TAG);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00337}00337         \textcolor{keywordflow}{if} (!riffChunk || riffChunk-\/>size < 4)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00338}00338         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00339}00339             \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00340}00340         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00341}00341 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00342}00342         \textcolor{keyword}{auto} riffHeader = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }RIFFChunkHeader*\textcolor{keyword}{>}(riffChunk);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00343}00343         \textcolor{keywordflow}{if} (riffHeader-\/>riff == FOURCC\_XWMA\_FILE\_TAG)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00344}00344         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00345}00345             \textcolor{comment}{// xWMA files do not contain loop information}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00346}00346             \textcolor{keywordflow}{return} S\_OK;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00347}00347         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00348}00348 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00349}00349         \textcolor{keywordflow}{if} (riffHeader-\/>riff != FOURCC\_WAVE\_FILE\_TAG)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00350}00350         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00351}00351             \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00352}00352         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00353}00353 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00354}00354         \textcolor{comment}{// Locate 'wsmp' (DLS Chunk)}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00355}00355         \textcolor{keyword}{auto} ptr = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }uint8\_t*\textcolor{keyword}{>}(riffHeader) + \textcolor{keyword}{sizeof}(RIFFChunkHeader);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00356}00356         \textcolor{keywordflow}{if} ((ptr + \textcolor{keyword}{sizeof}(RIFFChunk)) > wavEnd)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00357}00357         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00358}00358             \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(ERROR\_HANDLE\_EOF);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00359}00359         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00360}00360 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00361}00361         \textcolor{keyword}{auto} dlsChunk = FindChunk(ptr, riffChunk-\/>size, FOURCC\_DLS\_SAMPLE);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00362}00362         \textcolor{keywordflow}{if} (dlsChunk)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00363}00363         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00364}00364             ptr = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }uint8\_t*\textcolor{keyword}{>}(dlsChunk) + \textcolor{keyword}{sizeof}(RIFFChunk);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00365}00365             \textcolor{keywordflow}{if} (ptr + dlsChunk-\/>size > wavEnd)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00366}00366             \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00367}00367                 \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(ERROR\_HANDLE\_EOF);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00368}00368             \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00369}00369 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00370}00370             \textcolor{keywordflow}{if} (dlsChunk-\/>size >= \textcolor{keyword}{sizeof}(RIFFDLSSample))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00371}00371             \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00372}00372                 \textcolor{keyword}{auto} dlsSample = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }RIFFDLSSample*\textcolor{keyword}{>}(ptr);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00373}00373 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00374}00374                 \textcolor{keywordflow}{if} (dlsChunk-\/>size >= (dlsSample-\/>size + dlsSample-\/>loopCount * \textcolor{keyword}{sizeof}(DLSLoop)))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00375}00375                 \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00376}00376                     \textcolor{keyword}{auto} loops = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }DLSLoop*\textcolor{keyword}{>}(ptr + dlsSample-\/>size);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00377}00377                     \textcolor{keywordflow}{for} (uint32\_t j = 0; j < dlsSample-\/>loopCount; ++j)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00378}00378                     \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00379}00379                         \textcolor{keywordflow}{if} ((loops[j].loopType == DLSLoop::LOOP\_TYPE\_FORWARD || loops[j].loopType == DLSLoop::LOOP\_TYPE\_RELEASE))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00380}00380                         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00381}00381                             \textcolor{comment}{// Return 'forward' loop}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00382}00382                             *pLoopStart = loops[j].loopStart;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00383}00383                             *pLoopLength = loops[j].loopLength;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00384}00384                             \textcolor{keywordflow}{return} S\_OK;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00385}00385                         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00386}00386                     \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00387}00387                 \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00388}00388             \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00389}00389         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00390}00390 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00391}00391         \textcolor{comment}{// Locate 'smpl' (Sample Chunk)}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00392}00392         \textcolor{keyword}{auto} midiChunk = FindChunk(ptr, riffChunk-\/>size, FOURCC\_MIDI\_SAMPLE);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00393}00393         \textcolor{keywordflow}{if} (midiChunk)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00394}00394         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00395}00395             ptr = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }uint8\_t*\textcolor{keyword}{>}(midiChunk) + \textcolor{keyword}{sizeof}(RIFFChunk);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00396}00396             \textcolor{keywordflow}{if} (ptr + midiChunk-\/>size > wavEnd)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00397}00397             \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00398}00398                 \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(ERROR\_HANDLE\_EOF);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00399}00399             \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00400}00400 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00401}00401             \textcolor{keywordflow}{if} (midiChunk-\/>size >= \textcolor{keyword}{sizeof}(RIFFMIDISample))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00402}00402             \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00403}00403                 \textcolor{keyword}{auto} midiSample = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }RIFFMIDISample*\textcolor{keyword}{>}(ptr);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00404}00404 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00405}00405                 \textcolor{keywordflow}{if} (midiChunk-\/>size >= (\textcolor{keyword}{sizeof}(RIFFMIDISample) + midiSample-\/>loopCount * \textcolor{keyword}{sizeof}(MIDILoop)))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00406}00406                 \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00407}00407                     \textcolor{keyword}{auto} loops = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }MIDILoop*\textcolor{keyword}{>}(ptr + \textcolor{keyword}{sizeof}(RIFFMIDISample));}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00408}00408                     \textcolor{keywordflow}{for} (uint32\_t j = 0; j < midiSample-\/>loopCount; ++j)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00409}00409                     \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00410}00410                         \textcolor{keywordflow}{if} (loops[j].type == MIDILoop::LOOP\_TYPE\_FORWARD)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00411}00411                         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00412}00412                             \textcolor{comment}{// Return 'forward' loop}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00413}00413                             *pLoopStart = loops[j].start;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00414}00414                             *pLoopLength = loops[j].end -\/ loops[j].start + 1;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00415}00415                             \textcolor{keywordflow}{return} S\_OK;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00416}00416                         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00417}00417                     \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00418}00418                 \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00419}00419             \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00420}00420         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00421}00421 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00422}00422         \textcolor{keywordflow}{return} S\_OK;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00423}00423     \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00424}00424 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00425}00425 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00426}00426     \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00427}00427     HRESULT WaveFindTable(}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00428}00428         \_In\_reads\_bytes\_(wavDataSize) \textcolor{keyword}{const} uint8\_t* wavData,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00429}00429         \_In\_ \textcolor{keywordtype}{size\_t} wavDataSize,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00430}00430         \_In\_ uint32\_t tag,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00431}00431         \_Outptr\_result\_maybenull\_ \textcolor{keyword}{const} uint32\_t** pData,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00432}00432         \_Out\_ uint32\_t* dataCount) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00433}00433     \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00434}00434         \textcolor{keywordflow}{if} (!wavData || !pData || !dataCount)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00435}00435             \textcolor{keywordflow}{return} E\_POINTER;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00436}00436 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00437}00437         \textcolor{keywordflow}{if} (wavDataSize < (\textcolor{keyword}{sizeof}(RIFFChunk) + \textcolor{keyword}{sizeof}(uint32\_t)))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00438}00438         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00439}00439             \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00440}00440         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00441}00441 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00442}00442         *pData = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00443}00443         *dataCount = 0;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00444}00444 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00445}00445         \textcolor{keyword}{const} uint8\_t* wavEnd = wavData + wavDataSize;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00446}00446 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00447}00447         \textcolor{comment}{// Locate RIFF 'WAVE'}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00448}00448         \textcolor{keyword}{auto} riffChunk = FindChunk(wavData, wavDataSize, FOURCC\_RIFF\_TAG);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00449}00449         \textcolor{keywordflow}{if} (!riffChunk || riffChunk-\/>size < 4)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00450}00450         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00451}00451             \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00452}00452         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00453}00453 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00454}00454         \textcolor{keyword}{auto} riffHeader = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }RIFFChunkHeader*\textcolor{keyword}{>}(riffChunk);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00455}00455         \textcolor{keywordflow}{if} (riffHeader-\/>riff != FOURCC\_WAVE\_FILE\_TAG \&\& riffHeader-\/>riff != FOURCC\_XWMA\_FILE\_TAG)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00456}00456         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00457}00457             \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00458}00458         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00459}00459 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00460}00460         \textcolor{comment}{// Locate tag}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00461}00461         \textcolor{keyword}{auto} ptr = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }uint8\_t*\textcolor{keyword}{>}(riffHeader) + \textcolor{keyword}{sizeof}(RIFFChunkHeader);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00462}00462         \textcolor{keywordflow}{if} ((ptr + \textcolor{keyword}{sizeof}(RIFFChunk)) > wavEnd)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00463}00463         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00464}00464             \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(ERROR\_HANDLE\_EOF);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00465}00465         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00466}00466 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00467}00467         \textcolor{keyword}{auto} tableChunk = FindChunk(ptr, riffChunk-\/>size, tag);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00468}00468         \textcolor{keywordflow}{if} (tableChunk)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00469}00469         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00470}00470             ptr = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }uint8\_t*\textcolor{keyword}{>}(tableChunk) + \textcolor{keyword}{sizeof}(RIFFChunk);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00471}00471             \textcolor{keywordflow}{if} (ptr + tableChunk-\/>size > wavEnd)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00472}00472             \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00473}00473                 \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(ERROR\_HANDLE\_EOF);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00474}00474             \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00475}00475 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00476}00476             \textcolor{keywordflow}{if} ((tableChunk-\/>size \% \textcolor{keyword}{sizeof}(uint32\_t)) != 0)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00477}00477             \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00478}00478                 \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00479}00479             \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00480}00480 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00481}00481             *pData = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }uint32\_t*\textcolor{keyword}{>}(ptr);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00482}00482             *dataCount = tableChunk-\/>size / 4;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00483}00483         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00484}00484 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00485}00485         \textcolor{keywordflow}{return} S\_OK;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00486}00486     \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00487}00487 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00488}00488 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00489}00489     \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00490}00490     HRESULT LoadAudioFromFile(}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00491}00491         \_In\_z\_ \textcolor{keyword}{const} \textcolor{keywordtype}{wchar\_t}* szFileName,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00492}00492         \_Inout\_ std::unique\_ptr<uint8\_t[]>\& wavData,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00493}00493         \_Out\_ DWORD* bytesRead) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00494}00494     \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00495}00495         \textcolor{keywordflow}{if} (!szFileName)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00496}00496             \textcolor{keywordflow}{return} E\_INVALIDARG;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00497}00497 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00498}00498         \textcolor{comment}{// open the file}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00499}00499 \textcolor{preprocessor}{    \#if (\_WIN32\_WINNT >= \_WIN32\_WINNT\_WIN8)}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00500}00500         ScopedHandle hFile(safe\_handle(CreateFile2(szFileName,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00501}00501             GENERIC\_READ,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00502}00502             FILE\_SHARE\_READ,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00503}00503             OPEN\_EXISTING,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00504}00504             \textcolor{keyword}{nullptr})));}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00505}00505 \textcolor{preprocessor}{    \#else}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00506}00506         ScopedHandle hFile(safe\_handle(CreateFileW(szFileName,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00507}00507             GENERIC\_READ,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00508}00508             FILE\_SHARE\_READ,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00509}00509             \textcolor{keyword}{nullptr},}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00510}00510             OPEN\_EXISTING,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00511}00511             FILE\_ATTRIBUTE\_NORMAL,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00512}00512             \textcolor{keyword}{nullptr})));}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00513}00513 \textcolor{preprocessor}{    \#endif}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00514}00514 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00515}00515         \textcolor{keywordflow}{if} (!hFile)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00516}00516         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00517}00517             \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(GetLastError());}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00518}00518         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00519}00519 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00520}00520         \textcolor{comment}{// Get the file size}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00521}00521         FILE\_STANDARD\_INFO fileInfo;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00522}00522         \textcolor{keywordflow}{if} (!GetFileInformationByHandleEx(hFile.get(), FileStandardInfo, \&fileInfo, \textcolor{keyword}{sizeof}(fileInfo)))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00523}00523         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00524}00524             \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(GetLastError());}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00525}00525         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00526}00526 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00527}00527         \textcolor{comment}{// File is too big for 32-\/bit allocation, so reject read}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00528}00528         \textcolor{keywordflow}{if} (fileInfo.EndOfFile.HighPart > 0)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00529}00529         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00530}00530             \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00531}00531         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00532}00532 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00533}00533         \textcolor{comment}{// Need at least enough data to have a valid minimal WAV file}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00534}00534         \textcolor{keywordflow}{if} (fileInfo.EndOfFile.LowPart < (\textcolor{keyword}{sizeof}(RIFFChunk) * 2 + \textcolor{keyword}{sizeof}(DWORD) + \textcolor{keyword}{sizeof}(WAVEFORMAT)))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00535}00535         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00536}00536             \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00537}00537         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00538}00538 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00539}00539         \textcolor{comment}{// create enough space for the file data}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00540}00540         wavData.reset(\textcolor{keyword}{new} (std::nothrow) uint8\_t[fileInfo.EndOfFile.LowPart]);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00541}00541         \textcolor{keywordflow}{if} (!wavData)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00542}00542         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00543}00543             \textcolor{keywordflow}{return} E\_OUTOFMEMORY;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00544}00544         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00545}00545 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00546}00546         \textcolor{comment}{// read the data in}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00547}00547         \textcolor{keywordflow}{if} (!ReadFile(hFile.get(),}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00548}00548             wavData.get(),}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00549}00549             fileInfo.EndOfFile.LowPart,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00550}00550             bytesRead,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00551}00551             \textcolor{keyword}{nullptr}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00552}00552             ))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00553}00553         \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00554}00554             \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(GetLastError());}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00555}00555         \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00556}00556 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00557}00557         \textcolor{keywordflow}{return} (*bytesRead < fileInfo.EndOfFile.LowPart) ? E\_FAIL : S\_OK;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00558}00558     \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00559}00559 \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00560}00560 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00561}00561 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00562}00562 \mbox{\hyperlink{_d_d_s_texture_loader_8h_a3150346626fcea3ad7afe5dfb4ce27d8}{\_Use\_decl\_annotations\_}}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00563}00563 HRESULT \mbox{\hyperlink{namespace_direct_x_a7c3aef7ede9bdebe5c569921bd910753}{DirectX::LoadWAVAudioInMemory}}(}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00564}00564     \textcolor{keyword}{const} uint8\_t* wavData,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00565}00565     \textcolor{keywordtype}{size\_t} wavDataSize,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00566}00566     \textcolor{keyword}{const} WAVEFORMATEX** wfx,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00567}00567     \textcolor{keyword}{const} uint8\_t** startAudio,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00568}00568     uint32\_t* audioBytes) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00569}00569 \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00570}00570     \textcolor{keywordflow}{if} (!wavData || !wfx || !startAudio || !audioBytes)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00571}00571         \textcolor{keywordflow}{return} E\_INVALIDARG;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00572}00572 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00573}00573     *wfx = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00574}00574     *startAudio = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00575}00575     *audioBytes = 0;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00576}00576 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00577}00577     \textcolor{comment}{// Need at least enough data to have a valid minimal WAV file}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00578}00578     \textcolor{keywordflow}{if} (wavDataSize < (\textcolor{keyword}{sizeof}(RIFFChunk) * 2 + \textcolor{keyword}{sizeof}(DWORD) + \textcolor{keyword}{sizeof}(WAVEFORMAT)))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00579}00579     \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00580}00580         \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00581}00581     \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00582}00582 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00583}00583     \textcolor{keywordtype}{bool} dpds, seek;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00584}00584     HRESULT hr = WaveFindFormatAndData(wavData, wavDataSize, wfx, startAudio, audioBytes, dpds, seek);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00585}00585     \textcolor{keywordflow}{if} (FAILED(hr))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00586}00586         \textcolor{keywordflow}{return} hr;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00587}00587 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00588}00588     \textcolor{keywordflow}{return} (dpds || seek) ? E\_FAIL : S\_OK;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00589}00589 \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00590}00590 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00591}00591 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00592}00592 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00593}00593 \mbox{\hyperlink{_d_d_s_texture_loader_8h_a3150346626fcea3ad7afe5dfb4ce27d8}{\_Use\_decl\_annotations\_}}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00594}00594 HRESULT \mbox{\hyperlink{namespace_direct_x_a2a62130f6dcc9c323458838ffe0d1f8a}{DirectX::LoadWAVAudioFromFile}}(}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00595}00595     \textcolor{keyword}{const} \textcolor{keywordtype}{wchar\_t}* szFileName,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00596}00596     std::unique\_ptr<uint8\_t[]>\& wavData,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00597}00597     \textcolor{keyword}{const} WAVEFORMATEX** wfx,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00598}00598     \textcolor{keyword}{const} uint8\_t** startAudio,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00599}00599     uint32\_t* audioBytes) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00600}00600 \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00601}00601     \textcolor{keywordflow}{if} (!szFileName || !wfx || !startAudio || !audioBytes)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00602}00602         \textcolor{keywordflow}{return} E\_INVALIDARG;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00603}00603 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00604}00604     *wfx = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00605}00605     *startAudio = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00606}00606     *audioBytes = 0;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00607}00607 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00608}00608     DWORD bytesRead = 0;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00609}00609     HRESULT hr = LoadAudioFromFile(szFileName, wavData, \&bytesRead);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00610}00610     \textcolor{keywordflow}{if} (FAILED(hr))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00611}00611     \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00612}00612         \textcolor{keywordflow}{return} hr;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00613}00613     \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00614}00614 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00615}00615     \textcolor{keywordtype}{bool} dpds, seek;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00616}00616     hr = WaveFindFormatAndData(wavData.get(), bytesRead, wfx, startAudio, audioBytes, dpds, seek);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00617}00617     \textcolor{keywordflow}{if} (FAILED(hr))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00618}00618         \textcolor{keywordflow}{return} hr;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00619}00619 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00620}00620     \textcolor{keywordflow}{return} (dpds || seek) ? E\_FAIL : S\_OK;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00621}00621 \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00622}00622 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00623}00623 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00624}00624 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00625}00625 \mbox{\hyperlink{_d_d_s_texture_loader_8h_a3150346626fcea3ad7afe5dfb4ce27d8}{\_Use\_decl\_annotations\_}}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00626}00626 HRESULT \mbox{\hyperlink{namespace_direct_x_a685875055eaed43fd822407cc40d973e}{DirectX::LoadWAVAudioInMemoryEx}}(}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00627}00627     \textcolor{keyword}{const} uint8\_t* wavData,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00628}00628     \textcolor{keywordtype}{size\_t} wavDataSize,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00629}00629     \mbox{\hyperlink{struct_direct_x_1_1_w_a_v_data}{DirectX::WAVData}}\& result) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00630}00630 \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00631}00631     \textcolor{keywordflow}{if} (!wavData)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00632}00632         \textcolor{keywordflow}{return} E\_INVALIDARG;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00633}00633 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00634}00634     memset(\&result, 0, \textcolor{keyword}{sizeof}(result));}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00635}00635 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00636}00636     \textcolor{comment}{// Need at least enough data to have a valid minimal WAV file}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00637}00637     \textcolor{keywordflow}{if} (wavDataSize < (\textcolor{keyword}{sizeof}(RIFFChunk) * 2 + \textcolor{keyword}{sizeof}(DWORD) + \textcolor{keyword}{sizeof}(WAVEFORMAT)))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00638}00638     \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00639}00639         \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00640}00640     \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00641}00641 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00642}00642     \textcolor{keywordtype}{bool} dpds, seek;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00643}00643     HRESULT hr = WaveFindFormatAndData(wavData, wavDataSize, \&result.wfx, \&result.startAudio, \&result.audioBytes, dpds, seek);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00644}00644     \textcolor{keywordflow}{if} (FAILED(hr))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00645}00645         \textcolor{keywordflow}{return} hr;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00646}00646 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00647}00647     hr = WaveFindLoopInfo(wavData, wavDataSize, \&result.loopStart, \&result.loopLength);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00648}00648     \textcolor{keywordflow}{if} (FAILED(hr))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00649}00649         \textcolor{keywordflow}{return} hr;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00650}00650 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00651}00651     \textcolor{keywordflow}{if} (dpds)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00652}00652     \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00653}00653         hr = WaveFindTable(wavData, wavDataSize, FOURCC\_XWMA\_DPDS, \&result.seek, \&result.seekCount);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00654}00654         \textcolor{keywordflow}{if} (FAILED(hr))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00655}00655             \textcolor{keywordflow}{return} hr;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00656}00656     \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00657}00657     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (seek)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00658}00658     \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00659}00659         hr = WaveFindTable(wavData, wavDataSize, FOURCC\_XMA\_SEEK, \&result.seek, \&result.seekCount);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00660}00660         \textcolor{keywordflow}{if} (FAILED(hr))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00661}00661             \textcolor{keywordflow}{return} hr;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00662}00662     \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00663}00663 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00664}00664     \textcolor{keywordflow}{return} S\_OK;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00665}00665 \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00666}00666 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00667}00667 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00668}00668 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00669}00669 \mbox{\hyperlink{_d_d_s_texture_loader_8h_a3150346626fcea3ad7afe5dfb4ce27d8}{\_Use\_decl\_annotations\_}}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00670}00670 HRESULT \mbox{\hyperlink{namespace_direct_x_aa35f921e8b5bb5f9fd94c00e5e2f91ef}{DirectX::LoadWAVAudioFromFileEx}}(}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00671}00671     \textcolor{keyword}{const} \textcolor{keywordtype}{wchar\_t}* szFileName,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00672}00672     std::unique\_ptr<uint8\_t[]>\& wavData,}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00673}00673     \mbox{\hyperlink{struct_direct_x_1_1_w_a_v_data}{DirectX::WAVData}}\& result) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00674}00674 \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00675}00675     \textcolor{keywordflow}{if} (!szFileName)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00676}00676         \textcolor{keywordflow}{return} E\_INVALIDARG;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00677}00677 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00678}00678     memset(\&result, 0, \textcolor{keyword}{sizeof}(result));}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00679}00679 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00680}00680     DWORD bytesRead = 0;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00681}00681     HRESULT hr = LoadAudioFromFile(szFileName, wavData, \&bytesRead);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00682}00682     \textcolor{keywordflow}{if} (FAILED(hr))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00683}00683     \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00684}00684         \textcolor{keywordflow}{return} hr;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00685}00685     \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00686}00686 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00687}00687     \textcolor{keywordtype}{bool} dpds, seek;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00688}00688     hr = WaveFindFormatAndData(wavData.get(), bytesRead, \&result.wfx, \&result.startAudio, \&result.audioBytes, dpds, seek);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00689}00689     \textcolor{keywordflow}{if} (FAILED(hr))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00690}00690         \textcolor{keywordflow}{return} hr;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00691}00691 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00692}00692     hr = WaveFindLoopInfo(wavData.get(), bytesRead, \&result.loopStart, \&result.loopLength);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00693}00693     \textcolor{keywordflow}{if} (FAILED(hr))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00694}00694         \textcolor{keywordflow}{return} hr;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00695}00695 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00696}00696     \textcolor{keywordflow}{if} (dpds)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00697}00697     \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00698}00698         hr = WaveFindTable(wavData.get(), bytesRead, FOURCC\_XWMA\_DPDS, \&result.seek, \&result.seekCount);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00699}00699         \textcolor{keywordflow}{if} (FAILED(hr))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00700}00700             \textcolor{keywordflow}{return} hr;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00701}00701     \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00702}00702     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (seek)}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00703}00703     \{}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00704}00704         hr = WaveFindTable(wavData.get(), bytesRead, FOURCC\_XMA\_SEEK, \&result.seek, \&result.seekCount);}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00705}00705         \textcolor{keywordflow}{if} (FAILED(hr))}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00706}00706             \textcolor{keywordflow}{return} hr;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00707}00707     \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00708}00708 }
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00709}00709     \textcolor{keywordflow}{return} S\_OK;}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00710}00710 \}}
\DoxyCodeLine{\Hypertarget{_w_a_v_file_reader_8cpp_source_l00711}00711 }

\end{DoxyCode}
